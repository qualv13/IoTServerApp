syntax = "proto3";
package com.iot.backend.proto;

option java_package = "com.iot.backend.proto";
option java_outer_classname = "IotProtos";

message LampCommand {
  enum Type {
    ON = 0;
    OFF = 1;
    REBOOT = 2;
    OTA_UPDATE = 3; // Wymagane przez OtaController
  }
  Type type = 1;
  string ota_url = 2; // URL do pobrania firmware
}

// Prosty status (np. odpowiedź na zmianę stanu)
message LampStatus {
  bool is_on = 1;
  double sensor_value = 2; // Opcjonalnie, dla kompatybilności
}

message StatusReport {
  uint32 version = 1;
  int64 ts = 2;
  uint32 uptime_seconds = 3;
  repeated uint32 temperature_readings = 4; // lub double dla wygody
}

message LampConfig {
  int32 brightness = 1;
  string color = 2;
  int32 report_interval = 3;
}